# [React]

1. **react**

   유저 인터페이스를 만드는데 사용할 수 있는 자바스크립트 라이브러리

   SPA(Single Page Application) 구현을 위해서 사용하는 경우가 많다.

   이 목적으로 만들어진 라이브러리로는 angular.js나 vue.js도 있다.

   - component
     특정 부분의 모양을 결정하는 선언체
     템플릿 엔진은 데이터 셋과 HTML을 가지고 HTML을 재생성해서 보여주는 용도로만 사용하지만 컴포넌트는 많은 기능을 내장한 재사용 가능한 개체
   - Virtual DOM을 이용
     DOM(Document Object Model)은 자바스크립트 내장 객체보다 처리 속도가 느림.
     react에서는 Virtual DOM을 이용해서 출력할 내용을 메모리에 만든 후 데이터가 변경이 되면 Virtual DOM에 적용을 하고 실제 DOM과 비교를 한 후 변경되는 부분만 수정해서 출력하는 형태로 동작해서 빠르게 출력을 한다.
     템플릿 엔진은 데이터가 변경이 되면 변경된 데이터와 HTML을 가지고 다시 화면을 만들어서 출력을 한다.
     이 방식이 게임 엔진이 화면 출력을 만드는 방식이다.
   - MVC(Model VIew Controller), MVVM(Model View ViewModel), MVW(Model View Whatever), MVP(Model View Presentation) 등의 구조를 위한 프레임워크와 다른 오로지 View 만을 위한 라이브러리
   - react 만으로는 애플리케이션을 만들 수 없기 때문에 화면을 만드는 것을 제외한 기능은 직접 구현을 해야 한다는 것이 단점이다.
   - ajax 처리를 위한 axios나 fetch API와 같은 데이터를 가져오기 위한 라이브러리와 redux와 같은 라이브러리들을 같이 학습하게 된다.

2. **개발 환경 설정**

   1. node 설치
   2. npm 설치
   3. yarn

      npm을 개선한 패키지 관리자

      npm보다 속도가 빠르고 더 나은 캐싱 시스템을 이용

      설치는 `npm install yarn` 인데 yarn 명령을 모든 곳에서 사용할 수 있도록 하기 위해서 전역으로 설치 → `npm install -g yarn` (요즘은 경고날 수도 있음) 또는 `npm install --location=global yarn`

      Mac이나 Linux는 관리자 모드가 아니면 global로 설치가 안되므로 Mac이나 Linux인 경우는 앞에 sudo를 붙이고 해주어야 한다.

   4. webpack

      프로젝트에 사용된 파일을 분석해서 웹 문서 파일로 변환해주는 도구

      웹 브라우저는 js와 css 그리고 html을 해석할 수 있는데 프레임워크나 라이브러리를 사용하다보면 이러한 확장자 이외의 파일을 만들어서 사용하는 경우가 있는데 이 경우 webpack이 css나 html로 변환해준다.

   5. babel

      대다수의 브라우저들은 ES6(ECMA 2015) 버전의 자바스크립트 문법까지는 적용할 수 있는데 그 이상 버전의 문법은 이해하지 못하는 경우가 있어서 babel이 이러한 코드들을 ES6 이하의 문법으로 변환해주는 Trans Compiler

   - IDE
     Visual Studio Code와 같은 IDE 필요
     여러가지 확장 프로그램 설치
   - 형상 관리 도구
     Git이 대표적인 형상 관리 도구
   - 디버깅을 위한 도구
     React Developer Tools
   - react 프로젝트를 만들기 위한 애플리케이션 설치

3. **React Application 생성 및 실행**

   1. 생성

      ```bash
      yarn create reat-app 프로젝트이름
      ```

      기본 구조가 만들어져서 나옴

      entry point는 App.js

   2. 실행

      ```bash
      yarn start
      ```

      App.js를 읽어서 실행하고 브라우저를 자동으로 실행시켜 준다. 기본 포트는 3000번

      실행이 될 때 모든 파일들을 읽어서 번들러를 이용해서 실행 가능한 자바스크립트 파일을 만들어서 실행. 이 때 webpack과 babel이 동작

      소스 코드를 수정하면 자동으로 번들러가 해석을 해서 화면에 적용

4. **JSX**

   JavaScript XML의 약자로 JavaScript에 XML을 추가한 확장형 문법으로 react 프로젝트에서 사용하는 문법

   브라우저에서 실행할 때 Babel이 자바스크립트 코드로 변환을 해서 실행

   1. 장점

      보기 쉽고 익숙

      코드 작성 중 오류가 있으면 Babel이 코드를 변환하는 과정에서 이를 감지

      HTML 태그와 Component를 혼용해서 개발하는 것이 가능.

   2. 규칙

      - 주석 {/_ 주석 _/}
        //나 /\* \*/도 가능하지만 이렇게 주석을 만드는 경우 /> 는 다음 줄에 나와야 한다.
      - 반드시 하나의 부모 요소로 시작해야 한다.
        루트는 반드시 하나여야 한다.
      - 태그는 반드시 닫아야 한다.
        닫는 태그를 사용하던가 아니면 빈 태그처럼 <태그 />으로 처리를 해주어야 한다.
      - 자바스크립트 내용을 출력하고자 하는 경우에는 { } 안에 표현
      - 자바스크립트 표현식에는 if를 사용할 수 없어서 분기는 삼항 연산자 사용
      - false인 경우 렌더링할 내용이 없다면 && 연산자 사용 가능
      - 스타일을 적용할 때는 객체 형식으로 설정
        문자열로 설정하지 않음.
        모든 스타일 속성은 camel case를 이용
        스타일에서 - 가 들어가는 경우 이름이 변경된다.
        background-color ⇒ backgroundColor
      - class 속성 대신에 className이라는 속성 이용

      <aside>
      ▪️ 개발을 도와주는 도구
      1. ESLint: 코드 작성 도중 에러를 확인할 수 있는 도구
      2. prettier: 코드 포맷 설정(들여쓰기나 문자열 상수의 작은 따옴표나 큰 따옴표를 일정하게 또는 ; 삽입 등을 자동으로 해줌)

      </aside>

5. **Component**

   1. 개념

      화면을 구성하는 재사용 가능한 모듈

      View는 전체 화면을 의미하는 경우가 많고 Component는 전체 화면의 일부분을 의미한다.

      View는 전체 화면을 만드는 개념이라서 재사용성이 떨어짐

      확장자는 이전에는 js를 많이 사용했지만 최근에는 명확하게 구분하기 위해서 jsx나 tsx(Type Script 적용)를 사용하는 경우가 많다.

      Segment - Control을 1개 이상 모아서 만든 논리적인 화면 구성 단위

   2. 만드는 방식

      - 클래스형 컴포넌트(초창기)
        - Component라는 클래스로부터 상속을 받아서 render라는 함수에 출력할 내용을 리턴하는 형식으로 생성, 멤버 변수 사용이나 수명 주기 메서드를 사용하는 것이 편리
        - Life Cycle을 이용하는 것이 가능 - 함수는 호출하면 안의 내용을 수행하고 호출한 곳으로 리턴. 인스턴스는 한 번 만들어지면 소멸시키기 전까지 존재하고 생성될 때 생성자와 같은 메서드가 호출되기 때문에 수명 주기에 따른 작업이 수월하다.
        - 내부에 메서드 구현 가능
          ```jsx
          class 컴포넌트이름 extends Component{
          	render() {
          			출력할 내용 리턴
          		}
          }
          ```
      - 함수형 컴포넌트(최근): 출력할 내용을 리턴, 클래스로 만드는 것보다 가볍고 속도가 빠름.

        ```jsx
        function 이름() {
        	return 출력할 내용
        }

        const 이름 = () => {
        	return 출력할 내용
        }
        ```

   3. 확장자

      js, jsx(HTML에 사용되는 자바스크립트와 구분하기 위해서), tsx(타입스크립트 문법을 사용한다는 것을 명시하기 위해서) 등을 사용.

   4. 만들 때 주의사항

      컴포넌트는 Root가 1개여야 한다.

      div나 span 또는 <> 태그로 묶어서 표현한다.

      `react에서는 데이터 원본을 직접 수정하지 않는다.`

      다른 곳에서 넘겨준 데이터는 복제를 수정한 후 다시 대입하는 형태를 취하게 된다.

6. **props**

   properties의 약자

   상위 컴포넌트(포함하고 있는 컴포넌트, 부모 컴포넌트)에서 하위 컴포넌트에게 데이터를 넘겨줄 때 사용하는 개체

   1. 넘겨 줄 때

      ```jsx
      <컴포넌트이름 props이름 = 값...>
      // 개수 제한 없음
      ```

   2. 사용

      클래스형 컴포넌트는 `this.props.이름` 으로 사용

      함수형 컴포넌트는 모든 props를 하나로 묶어서 함수의 매개변수로 받음.

      함수의 매개변수를 이용해서 사용.

   3. props 출력

      props.children으로 가능

      함수형 컴포넌트 안에서 `컴포넌트이름.defaultProps = {props이름: 값 ...}` 을 이용해서 기본값을 설정할 수 있다. (데이터가 넘어오지 않는 경우 설정되는 값이다.)

   4. 비구조화 할당

      중괄호로 감싸서 값 받아오기

7. **Props의 유효성 검사 기능**

   필수나 자료형을 설정해서 검사가 가능

   화면 출력에는 영향이 없고 스크립트 오류를 발생시켜서 검사 창에서만 오류가 발생

   props 값을 전달할 때 문자열이 아니면 { }로 감싸야 한다.

   기본적으로는 XML 에서는 태그 안의 속성은 문자열만 가능하기 때문이다.

8. **State**

   props는 상위 컴포넌트에서 하위 컴포넌트에게 데이터를 넘겨주는 개념

   하위 컴포넌트는 props를 읽기 전용으로만 사용 가능.

   1. 개요

      Component 내부에서 읽고 쓸 수 있는 값을 사용하고자 할 때 사용

      기본 값을 설정할 수 있으며 setter 메서드를 이용해서 수정하는 것도 가능

      클래스형 컴포넌트의 경우 초기값 설정은 constructor(props) 메서드에서 수행.

      ```jsx
      this.state = {state이름: 값, ...}
      // 값의 수정은 setState 메서드를 이용

      // 클래스형 컴포넌트의 경우 값의 수정은 setState 메서드를 이용
      this.setState({state이름: 값, ...}
      ```

   2. 클래스형 컴포넌트에서의 state 사용

      생성자가 아닌 곳에서 초기화도 가능. 그렇지만 객체 지향에서는 생성자를 이용해서 초기화해주는 것이 괜츈

   3. state에 함수 전달

      state도 하나의 속성이고 자바스크립트는 함수도 하나의 데이터이므로 state에 함수를 전달하는 것이 가능

      ```jsx
      <button
        onClick={(e) => {
          this.setState((prevstate) => {
            return { number: prevstate.number + 1 };
          });
        }}
      >
        증가
      </button>
      ```

   4. state 설정이 끝난 후 콜백 호출

      setState에 2번쨰 매개변수로 함수를 전달하면 state 설정을 변경한 후 호출되는 함수를 설정할 수 있다.

      한 곳에서만 사용하는 데이터가 있는 경우 로컬의 데이터를 업데이트하고 업데이트가 끝나면 서버에 업로드를 하는 형태를 만들 때 사용할 수 있다.

   5. useState

      함수형 컴포넌트에서 state를 사용하기 위한 Hook

      이 함수를 호출하면 배열이 리턴되는데 배열의 첫 번째 데이터는 현재 상태이고 두 번째 데이터는 상태를 변경해주는 함수이다.

      상태를 변경하는 함수를 setter라고 하고 대부분 이름은 set상태이름 의 형태로 만들고 상태이름의 첫 글자는 대문자로 한다.

      useState에는 상태의 초기값을 매개변수로 대입한다.

      state를 수정할 때는 클래스형 컴포넌트에서는 setState, 그리고 함수형 컴포넌트에서는 useState 함수를 이용해야 한다.

      객체나 배열을 수정할 때는 복사본을 만들고 수정해야 한다.

      ```jsx
      const object = { name: "gyumin", age: 26 };
      // name 수정 - object의 속성을 직접 수정
      object.name = "규민";

      // 기존 object의 내용을 복제해서 name을 수정
      const copyObject = { ...object, name: "규민" };

      let arr = [1, 2, 3];
      // 배열에 직접추가
      arr.push(4);

      // 배열을 복제해서 추가
      let copyArr = ar.concat(4);
      or;
      let copyARr = [...arr, 4];

      // 배열에서 데이터를 샂게하거나 변형을 가하고자 할 떄는 filter나 map 함수 이용
      // filter나 map은 작업을 수행한 후 새로운 배열을 생성
      ```

9. **Event Handling**

   1. 주의사항

      이벤트 이름은 camelCase: 시작은 소문자로 하고 두 번째 단어부터는 시작이 대문자

      자바스크립트 코드를 단순하게 작성하는 것이 아니고 함수 형태의 값을 전달.

      DOM 요소에만 이벤트를 설정 - Component에는 이벤트 설정이 안됨.

      이벤트 종류: https://reactjs.org/docs/events.html

   2. onChange 이벤트

      입력 내용이 변경될 떄 호출되는 이벤트

   3. 이벤트 처리를 별도의 함수로 처리

      이벤트 처리하는 코드를 별도의 함수에 만들거나(모듈화) 상위 컴포넌트에서 만든 후 넘겨주는 경우(여러 컴포넌트에서 공통으로 사용하는 데이터를 조작하는 경우)가 있다.

   4. 바벨의 transform-class-properties 문법 사용

      클래스 안에 일반 메서드를 생성하면 바벨은 이를 인스턴스의 메서드로 자동으로 변형

      클래스 안에 함수를 만든 경우 this에 다시 바인딩하지 않아도 된다.

10. **Event Rounting**

    하나의 함수로 여러 DOM의 이벤트를 처리하는 것.

    이벤트 처리 함수의 매개 변수로 Event 객체가 전달되는데 이벤트 처리 함수의 매개변수의 target 속성을 호출하면 이벤트가 발생한 객체의 참조를 리턴한다.

    이벤트가 발생한 객체의 참조를 가지고 분기문을 만들어서 이벤트 처리 코드를 작성하면 하나의 함수를 가지고 여러 DOM의 이벤트 처리가 가능. name과 id 속성 등을 적절히 이용

    input을 여러개 만들 때는 되돍이면 input의 name과 state의 name을 맞춰주면 값이 변경될 때 state에 저장하는 부분이 쉬워진다.

11. **onKeyPress**

    키보드를 누를 때 발생하는 이벤트

    react에서는 키보드 이벤트에서 이벤트 객체의 key라는 속성에 누른 키값을 전달하는데 문자열 형태로 전달한다.

    input에서 Enter를 누르면 버튼 클릭한 것과 동일한 효과를 나타내도록 할 수 있다.

12. **ref**

    HTML에서는 DOM 요소에 어떤 작업을 수행하고자 하는 경우 DOM 객체에 id를 부여한 후 document.getElementById라는 함수로 DOM 객체를 찾은 후 작업을 수행

    react는 직접 DOM을 찾아와서 사용하는 작업을 거의하지 않는데 id 대신 ref라는 개념을 가지고 DOM을 찾아서 핸들링

    - 콜백 함수를 이용하는 방법
      ```jsx
      <태그 ref={(ref) => {this.? = ref}} />
      ```
    - createRef() 함수를 이용하는 방법
      이름 = React.createRef();
      ```jsx
      <태그 ref={this.이름} />
      ```
    - Component에 Ref 설정
      컴포넌트 내의 변수나 메서드에 접근이 가능.
      다른 컴포넌트에서 Ref 속성을 이용해서 조작이 가능.
      컴포넌트를 다른 곳에서 조작하고자 할 때 Ref를 적절히 활용하면 된다.

13. **데이터 불변성**

    React에서는 props와 useState로 만든 데이터는 원본을 수정할 수 없다.

    React는 Virtual DOM의 개념을 사용해서 렌더링을 구현

    React는 현재 화면의 DOM과 Memory 상의 Virtual DOM을 비교해서 수정된 부분만 다시 렌더링하는 구조로 렌더링 속도를 향상시킨다.

    게임의 물리 엔진도 이 원리를 이용하며 원본에 출력할 내용을 수정하면 안된다.

    자바스크립트는 1개의 데이터를 가진 것과 여러 개의 데이터를 가진 것을 사용할 때 다른 원리로 동작한다.
