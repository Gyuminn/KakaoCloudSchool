<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sort</title>
  </head>
  <body>
    <script>
      let subjects = ["HTML", "CSS", "JavaScript", "Nodejs"];
      // javascript는 숫자 배열을 문자 배열로 판단하고 정렬한다.
      // 코드를 가지고 정렬하기 때문에 이렇게 자릿수가 다른 데이터를
      // 정렬하면 오류가 발생한다.
      let nums = [20, 40, 230, 110];

      console.log(subjects.sort());
      // 숫자의 경우는 문제가 발생
      console.log(nums.sort());
      // sort 메서드에는 매개변수가 2개이고 정수를 하는 리턴하는 함수를 대입하는 것이 가능한데
      // 매개변수 2개는 배열의 데이터가 순차적으로 전부 대입되고
      // 양수를 리턴하면 앞의 데이터가 크다고 판단하고 위치를 변경
      console.log(nums.sort((a, b) => a - b));

      // 문자열 배열의 내림차순
      // 오름차순 정렬한 후 reverse를 해도 되지만 크기 비교를 이용
      console.log(subjects.sort((a, b) => b.localeCompare(a)));

      // 인스턴스를 생성할 수 있는 생성자
      function Book(name, price, date) {
        this.name = name;
        this.price = price;
        this.date = date;

        // javascript built in Object안에 있는 toString 메서드를 바꿨기 때문에
        // overriding에 해당한다.
        this.toString = function () {
          return this.name + ":" + this.price + ":" + this.date;
        };
      }

      // Books 배열 생성
      let books = [
        new Book("Python", 30000, new Date(2020, 8, 17)),
        new Book("Go", 40000, new Date(2021, 5, 9)),
        new Book("Rust", 25000, new Date(2021, 3, 29)),
        new Book("Docker", 45000, new Date(2022, 10, 10)),
      ];

      let menu = prompt("정렬 방법을 선택하세요");
      let result;
      switch (menu) {
        case "1":
          result = books.sort((a, b) => {
            if (a.name > b.name) {
              return 1;
            } else {
              return -1;
            }
          });

          break;
        case "2":
          result = books.sort((a, b) => {
            if (a.name < b.name) {
              return 1;
            } else {
              return -1;
            }
          });
          break;
        case "3":
          result = books.sort((a, b) => {
            return a.price - b.price;
          });
          break;
        case "4":
          result = books.sort((a, b) => {
            return b.price - a.price;
          });
          break;
        case "5":
          result = books.sort((a, b) => {
            return a.date.getTime() - b.date.getTime();
          });
          break;
        case "6":
          result = books.sort((a, b) => {
            return b.date.getTime() - a.date.getTime();
          });
          break;
      }
      console.log(result);
    </script>
  </body>
</html>
